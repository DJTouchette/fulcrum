version: 1
name: create_users
description: "Create users table with basic fields"

up:
  - create_table:
      name: users
      columns:
        - name: id
          type: serial
          primary_key: true
        - name: email
          type: varchar
          length: 255
          nullable: false
          unique: true
        - name: password_hash
          type: text
          nullable: false
        - name: created_at
          type: timestamp
          nullable: false
          default: "NOW()"
        - name: updated_at
          type: timestamp
          nullable: false
          default: "NOW()"
  - add_index:
      table: users
      columns: [email]
      unique: true
      name: idx_users_email_unique

down:
  - drop_table:
      name: users
  - drop_index:
      name: idx_users_email_unique
